// Two module test, pre-compiling the modules to mlir for import.

// RUN: rm -rf %t.dir
// RUN: mkdir -p %t.dir
// RUN: cp %s %t.dir/call2modules.silly
// RUN: %ExeSilly -c --emit-mlirbc %S/mod1.silly -o %t.dir/mod1.mlirbc
// RUN: %ExeSilly -c --emit-mlirbc %S/mod2.silly -o %t.dir/mod2.mlirbc
// RUN: %ExeSilly --imports %t.dir/mod1.mlirbc --imports %t.dir/mod2.mlirbc %S/call2modules.silly -o %t.exe
// RUN: %t.exe | %FileCheck %s --check-prefix=EXEC
// EXEC: r1 = 2
// EXEC: r2 = 4

IMPORT mod1; // addone
IMPORT mod2; // timestwo
IMPORT mod2; // shouldn't generate errors to do a second time.

INT16 r1 = CALL addone( 1 ); // 2
PRINT "r1 = ", r1;
INT16 r2 = CALL timestwo( r1 ); // 4
PRINT "r2 = ", r2;
